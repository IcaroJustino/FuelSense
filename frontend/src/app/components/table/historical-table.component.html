<div class="overflow-x-auto relative shadow-md sm:rounded-lg">

    <div *ngIf="isLoading" class="p-4 text-center text-gray-500">
        <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div>
            <span>Carregando hist√≥rico...</span>
        </div>
    </div>

    <table *ngIf="!isLoading" class="w-full text-sm text-left text-gray-500">

        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
            <tr>
                <th *ngFor="let col of columnNames" scope="col" class="py-3 px-6">
                    {{ col.label }}
                </th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let record of records" class="bg-white border-b hover:bg-gray-50">

                <td class="py-3 px-6 font-medium text-gray-900 whitespace-nowrap">
                    {{ record.data_coleta }}
                </td>

                <td class="py-3 px-6">
                    <span class="font-semibold">{{ record.posto_nome }}</span><br>
                    <span class="text-xs text-gray-400">{{ record.cidade }} / {{ record.estado }}</span>
                </td>

                <td class="py-3 px-6">
                    <span class="font-medium">{{ record.motorista_nome }}</span><br>
                    <span class="text-xs text-gray-400">{{ record.motorista_cpf }}</span>
                </td>

                <td class="py-3 px-6">
                    <span class="text-gray-700">{{ record.tipo_veiculo }}</span><br>
                    <span class="text-xs font-semibold text-gray-400">{{ record.veiculo_placa }}</span>
                </td>

                <td class="py-3 px-6">
                    <span class="text-xs font-medium px-2.5 py-0.5 rounded-full"
                          [ngClass]="getFuelClass(record.tipo_combustivel)">
                        {{ record.tipo_combustivel }}
                    </span>
                </td>

                <td class="py-3 px-6">
                    {{ record.preco_venda | currency:'BRL':'symbol':'1.2-2':'pt' }}
                </td>

                <td class="py-3 px-6">
                    {{ record.volume_vendido | number:'1.2-2' }} L
                </td>

                <td class="py-3 px-6 font-bold text-gray-900">
                    {{ calculateTotal(record) | currency:'BRL':'symbol':'1.2-2':'pt' }}
                </td>

            </tr>
        </tbody>

        <tfoot *ngIf="records.length === 0 && !isLoading">
            <tr>
                <td colspan="8" class="py-6 text-center text-gray-500">
                    Nenhum registro de abastecimento encontrado.
                </td>
            </tr>
        </tfoot>

    </table>
</div>
